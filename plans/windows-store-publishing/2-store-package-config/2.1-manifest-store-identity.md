# Step 2.1: Configure Package Manifest for Store Identity

**Part of:** Step 2 from plan.md  
**Focus:** Update Package.appxmanifest with store-compatible identity and metadata  
**File to Edit:** `ResizeMe/Package.appxmanifest`  
**Estimated Time:** 10-15 minutes

## Overview

This substep updates the package manifest with store identity information obtained from Partner Center, configuring it for Microsoft Store compatibility while maintaining development functionality.

## Pre-Substep Checklist

- [x] **Branch:** Working on `feature/windows-store-publishing` (from plan.md)
- [x] **Current Step:** Completed Step 1 - Developer account setup with store identity information
- [ ] **Prerequisites:** Store identity details from Step 1.2 saved and accessible
- [x] **Codebase State:** Project builds successfully (`dotnet build ResizeMe.sln`)

## Implementation

### Goal
Update Package.appxmanifest with store-generated identity values while preserving current app functionality.

### Step-by-Step Instructions

-#### Step 1: Backup Current Manifest
- [x] Navigate to `x:\burkeholland\ResizeMe\ResizeMe\`
- [x] Create backup: copy `Package.appxmanifest` to `Package.appxmanifest.dev-backup`
- [ ] This preserves development configuration for future local testing

-#### Step 2: Update Identity Element
- [x] Open `ResizeMe/Package.appxmanifest` in text editor
- [x] Locate the `<Identity>` element (around line 9)
- [x] Replace the current Identity section with store values:

```xml
  <Identity
    Name="[STORE_PACKAGE_IDENTITY_NAME]"
    Publisher="[STORE_CERTIFICATE_SUBJECT]"
    Version="1.0.0.0" />
```

**Replace placeholders with actual values from Step 1.2:**
- `[STORE_PACKAGE_IDENTITY_NAME]`: Use Package Identity Name from Partner Center
- `[STORE_CERTIFICATE_SUBJECT]`: Use Publisher certificate subject (e.g., "CN=Burke Holland")

-#### Step 3: Update Properties for Store Display
- [x] Locate the `<Properties>` section (around line 16)
- [x] Update display information for store listing:

```xml
  <Properties>
    <DisplayName>[RESERVED_APP_NAME]</DisplayName>
    <PublisherDisplayName>[PUBLISHER_DISPLAY_NAME]</PublisherDisplayName>
    <Logo>Assets\StoreLogo.png</Logo>
  </Properties>
```

**Replace placeholders:**
- `[RESERVED_APP_NAME]`: Use app name reserved in Partner Center (e.g., "ResizeMe")
- `[PUBLISHER_DISPLAY_NAME]`: Use Publisher Display Name from Partner Center

-#### Step 4: Verify Dependencies Section
- [x] Locate the `<Dependencies>` section (around line 22)
- [x] Ensure minimum version meets store requirements:

```xml
  <Dependencies>
    <TargetDeviceFamily Name="Windows.Universal" MinVersion="10.0.17763.0" MaxVersionTested="10.0.19041.0" />
    <TargetDeviceFamily Name="Windows.Desktop" MinVersion="10.0.17763.0" MaxVersionTested="10.0.19041.0" />
  </Dependencies>
```

**Note:** MinVersion 10.0.17763.0 (Windows 10 version 1809) is recommended for store compatibility

-#### Step 5: Update Visual Elements for Store
- [x] Locate `<uap:VisualElements>` section (around line 33)
- [x] Update display name and description:

```xml
      <uap:VisualElements
        DisplayName="[RESERVED_APP_NAME]"
        Description="Quick window resizer with preset dimensions and global hotkeys"
        BackgroundColor="transparent"
        Square150x150Logo="Assets\Square150x150Logo.png"
        Square44x44Logo="Assets\Square44x44Logo.png">
```

**Replace placeholder:**
- `[RESERVED_APP_NAME]`: Same reserved app name from Properties section

-#### Step 6: Verify PhoneIdentity Update
- [x] Locate `<mp:PhoneIdentity>` section (around line 12)
- [x] Update PhoneProductId to match Package Identity:

```xml
  <mp:PhoneIdentity PhoneProductId="[STORE_PACKAGE_IDENTITY_NAME]" PhonePublisherId="00000000-0000-0000-0000-000000000000"/>
```

## Example Complete Identity Section

Here's an example of how the updated sections should look:

```xml
  <Identity
    Name="12345BurkeHolland.ResizeMe"
    Publisher="CN=Burke Holland"
    Version="1.0.0.0" />

  <mp:PhoneIdentity PhoneProductId="12345BurkeHolland.ResizeMe" PhonePublisherId="00000000-0000-0000-0000-000000000000"/>

  <Properties>
    <DisplayName>ResizeMe</DisplayName>
    <PublisherDisplayName>Burke Holland</PublisherDisplayName>
    <Logo>Assets\StoreLogo.png</Logo>
  </Properties>
```


## Verification Checklist

- [x] File saved with store identity values properly configured
- [x] No build errors: `dotnet build ResizeMe.sln`
- [ ] Package Identity Name matches Partner Center exactly
- [ ] Publisher certificate subject matches Partner Center format
- [x] App display names are consistent throughout manifest
- [x] MinVersion set to 10.0.17763.0 or higher for store compatibility

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Build errors after manifest change | Verify XML syntax; check for typos in identity values |
| Publisher format incorrect | Ensure Publisher starts with "CN=" followed by exact Partner Center name |
| Package name format wrong | Use exact Package Identity Name from Partner Center (no modifications) |
| Version conflicts | Keep Version="1.0.0.0" format; increment for store updates only |

## Files Modified

- [ ] ✅ **Modified**: `ResizeMe/Package.appxmanifest`
- [ ] ✅ **Created**: `ResizeMe/Package.appxmanifest.dev-backup` (development backup)

## What Comes Next

- Next substep: Step 2.2 - Store Build Configuration
- Package is now configured with store identity
- Ready for store-compatible build process setup
- Build and test configuration will validate manifest changes

## Important Notes

- **Never modify Package Identity** after first store submission
- **Keep development backup** for local testing without store identity
- **Version numbers** will be incremented automatically in release builds
- **Certificate subject must match exactly** what Partner Center generates
- **Package names are case-sensitive** - copy exactly from Partner Center