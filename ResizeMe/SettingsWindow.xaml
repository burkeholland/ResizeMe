<Window
  x:Class="ResizeMe.SettingsWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="ResizeMe Settings">
  <Window.SystemBackdrop>
    <MicaBackdrop Kind="Base" />
  </Window.SystemBackdrop>
  <Grid Background="{ThemeResource LayerFillColorDefaultBrush}" Padding="20">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <!-- Header Card -->
    <Border Grid.Row="0" 
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="8"
            BorderThickness="1"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            Margin="0,0,0,16"
            Padding="20,16">
      <StackPanel Orientation="Horizontal" Spacing="12">
        <FontIcon FontFamily="Segoe Fluent Icons" 
                 Glyph="&#xE8B9;" 
                 FontSize="24" 
                 Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                 VerticalAlignment="Center" />
        <TextBlock Text="Preset Settings" 
                  FontSize="20" 
                  FontWeight="SemiBold" 
                  VerticalAlignment="Center"
                  Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
      </StackPanel>
    </Border>

    <!-- Content Scroll Region -->
    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
      <Grid ColumnSpacing="20">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        
        <!-- Current Presets Card -->
        <Border Grid.Column="0"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                BorderThickness="1"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                Padding="16">
          <StackPanel Spacing="12">
            <TextBlock Text="Current Presets" 
                      FontWeight="SemiBold" 
                      FontSize="16"
                      Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
            
            <ListView x:Name="PresetList" 
                     SelectionMode="Single" 
                     MinHeight="300"
                     MaxHeight="400"
                     Background="{ThemeResource ControlFillColorSecondaryBrush}"
                     CornerRadius="6"
                     Padding="8">
              <ListView.ItemTemplate>
                <DataTemplate>
                  <Border Background="{ThemeResource ControlFillColorDefaultBrush}"
                         CornerRadius="4"
                         Padding="8,6"
                         Margin="0,1">
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                      </Grid.ColumnDefinitions>
                      <FontIcon Grid.Column="0"
                               FontFamily="Segoe Fluent Icons" 
                               Glyph="&#xE7C4;" 
                               FontSize="14" 
                               Foreground="{ThemeResource AccentTextFillColorSecondaryBrush}"
                               VerticalAlignment="Center" 
                               Margin="0,0,8,0"/>
                      <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding Name}" 
                                  FontWeight="SemiBold" 
                                  FontSize="13"
                                  Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
                        <TextBlock Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                                  FontSize="11">
                          <Run Text="{Binding Width}" />
                          <Run Text=" x " />
                          <Run Text="{Binding Height}" />
                        </TextBlock>
                      </StackPanel>
                    </Grid>
                  </Border>
                </DataTemplate>
              </ListView.ItemTemplate>
            </ListView>
            
            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Left">
              <Button x:Name="RemoveButton" 
                     Content="Remove" 
                     Click="RemoveButton_Click"
                     Padding="10,6"
                     FontSize="12"
                     CornerRadius="4" />
              <Button x:Name="ResetButton" 
                     Content="Reset" 
                     Click="ResetButton_Click"
                     Padding="10,6"
                     FontSize="12"
                     CornerRadius="4" />
            </StackPanel>
          </StackPanel>
        </Border>

        <!-- Add New Preset Card -->
        <Border Grid.Column="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                BorderThickness="1"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                Padding="16">
          <StackPanel Spacing="16" VerticalAlignment="Top">
            <TextBlock Text="Add New Preset" 
                      FontWeight="SemiBold" 
                      FontSize="16"
                      Foreground="{ThemeResource TextFillColorPrimaryBrush}" />
            
            <StackPanel Spacing="12">
              <TextBox x:Name="NameInput" 
                      PlaceholderText="Preset name"
                      FontSize="14"
                      Padding="10"
                      CornerRadius="6" />
              
              <StackPanel Spacing="8">
                <TextBox x:Name="WidthInput" 
                        PlaceholderText="Width (e.g. 1920)"
                        InputScope="Number"
                        FontSize="14"
                        Padding="10"
                        CornerRadius="6" />
                        
                <TextBox x:Name="HeightInput" 
                        PlaceholderText="Height (e.g. 1080)"
                        InputScope="Number"
                        FontSize="14"
                        Padding="10"
                        CornerRadius="6" />
              </StackPanel>
                        
              <Button x:Name="AddButton" 
                     Content="Add Preset" 
                     Style="{StaticResource PrimaryActionButtonStyle}" 
                     Click="AddButton_Click"
                     Padding="16,10"
                     CornerRadius="6"
                     HorizontalAlignment="Stretch"
                     FontSize="14" />
              
              <TextBlock x:Name="ValidationText" 
                        Foreground="{ThemeResource SystemFillColorCautionBrush}" 
                        FontSize="11" 
                        TextWrapping="Wrap"
                        Visibility="Collapsed" />
              <TextBlock x:Name="StatusText" 
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                        FontSize="11" 
                        TextWrapping="Wrap" />
            </StackPanel>
          </StackPanel>
        </Border>
      </Grid>
    </ScrollViewer>

    <!-- Footer Card -->
    <Border Grid.Row="2" 
            Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
            CornerRadius="8"
            BorderThickness="1"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            Padding="20,16"
            Margin="0,16,0,0">
      <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
        <Button x:Name="CloseButton" 
               Content="Done" 
               Click="CloseButton_Click"
               Style="{StaticResource PrimaryActionButtonStyle}"
               Padding="20,12"
               CornerRadius="6" />
      </StackPanel>
    </Border>
  </Grid>
</Window>
