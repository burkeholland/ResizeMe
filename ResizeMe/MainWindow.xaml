<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="ResizeMe.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ResizeMe">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="BaseAlt"/>
    </Window.SystemBackdrop>

    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="8"
            BorderThickness="1"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">

        <Grid x:Name="RootGrid">
            <Grid.RowDefinitions>
                <RowDefinition Height="48"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Grid x:Name="TitleBar" Grid.Row="0" Background="Transparent" Margin="16,8,16,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE8B9;" 
                             FontSize="16" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" 
                             Margin="0,0,8,0"/>
                    <TextBlock Text="ResizeMe" FontWeight="SemiBold" FontSize="14" 
                              VerticalAlignment="Center" Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                </StackPanel>

                <TextBlock x:Name="StatusText" Grid.Column="1" Text="Ready" FontSize="12" 
                          VerticalAlignment="Center" HorizontalAlignment="Center"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}" 
                          Margin="8,0"/>

                <Button x:Name="SettingsButton" Grid.Column="2" Style="{ThemeResource SubtleButtonStyle}"
                       Width="32" Height="32" Padding="4" ToolTipService.ToolTip="Settings"
                       Click="SettingsButton_Click">
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE713;" FontSize="14"/>
                </Button>
            </Grid>

            <!-- Main Content Area -->
            <ScrollViewer x:Name="ContentScrollViewer" Grid.Row="1" Margin="16,8,16,16" 
                         VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <StackPanel x:Name="MainContent" Spacing="16">
                    <!-- Current Window Info Section -->
                    <Border x:Name="CurrentWindowSection" Background="{ThemeResource ControlFillColorDefaultBrush}" 
                           CornerRadius="6" Padding="12" Visibility="Collapsed">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Target Window" FontWeight="SemiBold" FontSize="12" 
                                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock x:Name="CurrentWindowText" Text="No window selected" FontSize="14" 
                                      TextWrapping="WrapWholeWords" Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                            <TextBlock x:Name="CurrentWindowSize" Text="" FontSize="12" 
                                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </Border>

                    <!-- Quick Resize Presets Section -->
                    <StackPanel x:Name="PresetsSection" Spacing="12">
                        <TextBlock Text="Quick Resize" FontWeight="SemiBold" FontSize="16" 
                                  Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                        
                        <Grid x:Name="PresetsGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button x:Name="Preset1280x720" Grid.Row="0" Grid.Column="0" 
                                   Style="{ThemeResource AccentButtonStyle}" Margin="0,0,4,4"
                                   Height="48" Click="PresetButton_Click" Tag="1280x720">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="HD" FontWeight="SemiBold" FontSize="14"/>
                                    <TextBlock Text="1280×720" FontSize="11" Opacity="0.9"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="Preset1920x1080" Grid.Row="0" Grid.Column="1" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="4,0,0,4"
                                   Height="48" Click="PresetButton_Click" Tag="1920x1080">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="Full HD" FontWeight="SemiBold" FontSize="14"/>
                                    <TextBlock Text="1920×1080" FontSize="11" Opacity="0.7"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="Preset1366x768" Grid.Row="1" Grid.Column="0" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="0,4,4,4"
                                   Height="48" Click="PresetButton_Click" Tag="1366x768">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="Laptop" FontWeight="SemiBold" FontSize="14"/>
                                    <TextBlock Text="1366×768" FontSize="11" Opacity="0.7"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="Preset1024x768" Grid.Row="1" Grid.Column="1" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="4,4,0,4"
                                   Height="48" Click="PresetButton_Click" Tag="1024x768">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="Classic" FontWeight="SemiBold" FontSize="14"/>
                                    <TextBlock Text="1024×768" FontSize="11" Opacity="0.7"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="Preset800x600" Grid.Row="2" Grid.Column="0" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="0,4,4,4"
                                   Height="48" Click="PresetButton_Click" Tag="800x600">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="Compact" FontWeight="SemiBold" FontSize="14"/>
                                    <TextBlock Text="800×600" FontSize="11" Opacity="0.7"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="Preset1440x900" Grid.Row="2" Grid.Column="1" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="4,4,0,4"
                                   Height="48" Click="PresetButton_Click" Tag="1440x900">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <TextBlock Text="Work" FontWeight="SemiBold" FontSize="14"/>
                                    <TextBlock Text="1440×900" FontSize="11" Opacity="0.7"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="CustomSizeButton" Grid.Row="3" Grid.Column="0" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="0,4,4,0"
                                   Height="48" Click="CustomSizeButton_Click">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE70F;" FontSize="16"/>
                                    <TextBlock Text="Custom" FontWeight="SemiBold" FontSize="12"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="MorePresetsButton" Grid.Row="3" Grid.Column="1" 
                                   Style="{ThemeResource DefaultButtonStyle}" Margin="4,4,0,0"
                                   Height="48" Click="MorePresetsButton_Click">
                                <StackPanel Orientation="Vertical" Spacing="2">
                                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE712;" FontSize="16"/>
                                    <TextBlock Text="More..." FontWeight="SemiBold" FontSize="12"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </StackPanel>

                    <!-- Window Selection Section -->
                    <StackPanel x:Name="WindowSelectionSection" Spacing="12" Visibility="Collapsed">
                        <TextBlock Text="Select Window" FontWeight="SemiBold" FontSize="16" 
                                  Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>

                        <ListView x:Name="WindowList" MaxHeight="200" 
                                 SelectionMode="Single" SelectionChanged="WindowList_SelectionChanged"
                                 Background="Transparent" BorderThickness="0">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="0,4" Padding="8" Background="{ThemeResource ControlFillColorDefaultBrush}" 
                                            CornerRadius="4">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <FontIcon Grid.Column="0" FontFamily="Segoe Fluent Icons" Glyph="&#xE8A7;" 
                                                     FontSize="16" VerticalAlignment="Center" Margin="0,0,8,0"/>

                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="{Binding DisplayText}" FontSize="14" 
                                                          TextTrimming="CharacterEllipsis" FontWeight="SemiBold"/>
                                                <TextBlock Text="{Binding Bounds}" FontSize="11" 
                                                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                            </StackPanel>

                                            <FontIcon Grid.Column="2" FontFamily="Segoe Fluent Icons" Glyph="&#xE76C;" 
                                                     FontSize="12" Opacity="0.6" VerticalAlignment="Center"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <Button x:Name="RefreshWindowsButton" HorizontalAlignment="Stretch" 
                               Style="{ThemeResource DefaultButtonStyle}" Height="36"
                               Click="RefreshWindowsButton_Click">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE72C;" FontSize="14"/>
                                <TextBlock Text="Refresh Window List" FontSize="14"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer -->
            <Border Grid.Row="2" Background="{ThemeResource ControlFillColorDefaultBrush}" 
                   CornerRadius="0,0,8,8" Padding="16,8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock x:Name="FooterText" Grid.Column="0" Text="Press Ctrl+Alt+R to show" 
                              FontSize="11" VerticalAlignment="Center" 
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                        <Button x:Name="AlwaysOnTopButton" Style="{ThemeResource SubtleButtonStyle}"
                               Width="28" Height="28" Padding="2" ToolTipService.ToolTip="Always on top"
                               Click="AlwaysOnTopButton_Click">
                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE840;" FontSize="12"/>
                        </Button>

                        <Button x:Name="HideButton" Style="{ThemeResource SubtleButtonStyle}"
                               Width="28" Height="28" Padding="2" ToolTipService.ToolTip="Hide window"
                               Click="HideButton_Click">
                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE921;" FontSize="12"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
